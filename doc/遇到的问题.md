# 遇到的问题

## 1、element-plus中动态图标显示

### 出现的问题：
element-plus中的icon的显示讲原本的class属性替换为了单独的标签，这就导致了无法替换class属性来改变标签。
```html
<el-icon>
    <picture-rounded />
</el-icon>
```

### 解决的方法:
使用`<component :is="icon-name">`的方法来动态代替，icon-name为将要显示的icon的name属性

```html
<el-icon :size="size" :color="color">
    <component :is="name"></component>
</el-icon>
```


## 动态标签页的实现
重点是如何保存`route-view`中的页面的状态的缓存，这才是重点所在，

在网上找到的一种实现方法，试过之后发现已经失效了
```html
<keep-alive>
    <router-view v-if="$route.meta.keepAlive"></router-view>
</keep-alive>
<router-view v-if="!$route.meta.keepAlive"></router-view>

```


vue3中的实现方式为：
```html
<router-view v-slot="{ Component }">
    <keep-alive>
        <component :is="Component" />
    </keep-alive>
</router-view>
``` 

## keep-alive 缓存问题
keep-alive中有`include` 和 `exclude`，可以实现有目的的缓存，但是在`include`和`exclude`中保存的值要清楚，**保存的是Component的name，而不是路由的name**，由于我的路由名称与模块名称无法对应起来，所以我使用路由名称去缓存的时候会缓存失败。

```html
<router-view v-slot="{ Component }">
    <keep-alive :include="cacheList">
    <component :is="Component" :key="$route.name" />
    </keep-alive>
</router-view>
```

从路由中获取组件的名称方法，可以通过route组件来获取到，
```js
let matched = this.$route.matched;
// 判断matched是否存在
if(!matched) return;
let componetName = matched[matched.length - 1].components.default.name;
```